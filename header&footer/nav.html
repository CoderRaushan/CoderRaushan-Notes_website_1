<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>header_file</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,500;0,700;0,900;1,900&display=swap"rel="stylesheet">
    <link rel="icon" href="/photos/weg_logo.png">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script>
        // Add this script to handle user authentication status
        document.addEventListener("DOMContentLoaded", function () {
            const authStatus = localStorage.getItem("user-creds");
            if (authStatus) 
            {
                // User is signed in
                document.getElementById("signupBtn").style.display = "none";
                document.getElementById("signinBtn").style.display = "none";
                document.getElementById("signout").style.display = "inline-block";
                document.getElementById("username").style.display = "inline-block";
                document.getElementById("username").textContent = JSON.parse(localStorage.getItem("user-info")).firstname;
            }
            else 
            {
                // User is not signed in
                document.getElementById("signupBtn").style.display = "inline-block";
                document.getElementById("signinBtn").style.display = "inline-block";
                document.getElementById("signout").style.display = "none";
                document.getElementById("username").style.display = "none";
                setTimeout(function () {
                    // Redirect to the signin page  after 1 second delay
                    window.location.href = "/database/signin.html";
                }, 1000); // 1 seconds delay
            }
        });
    </script>
</head>
<body>
    <nav class="nav-class-for-phone">
        <input type="checkbox" id="check">
        <label for="check" class="checkbtn"><i class="fa-solid fa-bars"></i></label>
        <label class="logo"><img style="cursor: pointer;" class="lp" id="myImage" src="/photos/weg_logo.png" alt="logo">RausNotes39</label>
                <ul class="nav-item">
                    <li><a class="active" href="/index.html" target="_blank">Home</a></li>
                    <li><a class="active" href="/portfolio/portfolio.html" target="_blank">About</a></li>
                    <li><a class="active" href="service.html">Service</a></li>
                    <li><a class="active" href="service.html">Feedback</a></li>
                    <li><a id="signinBtn" href="/database/signIn.html">Login</a></li>
                    <li><a id="username" style="color: #fff;">User </a></li>
                    <li><a class=" signuphidekarnahai" id="signupBtn" href="/database/signUp.html">SignUp</a></li>
                    <li><a id="signout" class="logoutbtn">LogOut</a></li>
                    <li><i onclick="sharepage()"class="fa-solid fa-share-from-square"></i></li>
                    <li id="darkicon"><i class="fa-solid fa-moon" ></i></li>
                </ul>
    </nav>
    <div class="item">
        <a href="/portfolio/portfolio.html" target="_blank">portfolio</a>
        <a href="/notes/notes_section.html" target="_blank">Notes</a>
        <a href="/sgpa/sgpa_page.html" target="_blank">SGPA</a>
        <a href="/weather/weather.html" target="_blank">Weather</a>
        <a href="/ppt_section/ppt_page.html">PPT</a>
        <a href="/toss/toss.html" target="_blank">toss</a>
    </div>
 <!-- for dark mode and light mode -->
 <script>
    var darkicon = document.getElementById("darkicon");
    darkicon.onclick = function () {
        document.body.classList.toggle("dark_theme");
        if (document.body.classList.contains("dark_theme")) {
            darkicon.innerHTML = '<i class="fa-solid fa-sun"></i>';
        }
        else {
            darkicon.innerHTML = '<i class="fa-solid fa-moon"></i>';
        }
    }
</script>
    <!-- for share the weblink -->
    <script>
        function toggleShareOptions() {
            var shareOptions = document.getElementById("share-options");
            shareOptions.style.display = (shareOptions.style.display === "none") ? "block" : "none";
        }
    </script>
<script>
    async function sharepage()
    {
        await navigator.share({
            title:document.title,
            url:window.location.href
        })
    }
</script>
 <!-- JAVA script code for clicking outside of the nav bar it gores back -->
<!-- <script>
    document.addEventListener('DOMContentLoaded', function () 
    {
        var nav = document.querySelector(".nav-class-for-phone");
        var checkbox = document.getElementById('check');
            document.addEventListener('click', function (event) {
            if (!nav.contains(event.target) && checkbox.checked)
            {
                checkbox.checked = false;
            }
        });
    });
</script>  -->
<!-- for logout button working script is added overthere -->
<script>
    const username = document.querySelector("#username");
const signoutBtn = document.querySelector("#signout");
// const userEmail = document.querySelector("#useremail");

let userCreds = JSON.parse(localStorage.getItem("user-creds"));
let userInfo = JSON.parse(localStorage.getItem("user-info"));



let Signout = () => {
    localStorage.removeItem("user-creds");
    localStorage.removeItem("user-info");
    window.location.href = '/../index.html'
}

let CheckCred = () => {
    if (!localStorage.getItem("user-cred")) {
        window.location.href = 'signIn.html'
    } else {
        username.innerText = userInfo.firstname;
    }
}
username.innerText = userInfo.firstname;
// window.addEventListener('load', CheckCred)
signoutBtn.addEventListener('click', Signout);
</script>
</body>
</html>